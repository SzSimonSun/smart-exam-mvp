# 智能考试系统 - 试卷拆分功能测试指南

## 功能概览
在题库模块新增的试卷拆分子模块，实现了以下功能：
1. 上传试卷PDF或图片文件
2. 自动拆分识别为单个题目
3. 人工审核和批量操作
4. 一键添加到题库

## 测试步骤

### 1. 访问试卷拆分功能
- 登录系统后访问题库管理页面
- 点击页面上方的"试卷拆分"按钮，或者
- 点击快捷入口卡片中的"试卷拆分入库"
- 进入 `/questions/upload` 页面

### 2. 文件上传测试
- 支持格式：PDF、JPG、PNG、DOCX
- 文件大小限制：50MB
- 可以拖拽上传或点击选择文件
- 上传后会显示进度条

### 3. 拆分会话管理
- 上传完成后自动跳转到"拆分会话"标签页
- 显示所有历史拆分会话
- 可以查看每个会话的状态和处理进度

### 4. 题目审核功能
- 点击"查看详情"进入题目审核页面
- 显示拆分识别出的题目列表
- 每个题目显示：
  - 识别的文本内容
  - 题目截图
  - 题目类型（单选、多选等）
  - 置信度评分

### 5. 单个题目操作
- 编辑并入库：修改题目内容后添加到题库
- 拒绝：标记为不合格题目

### 6. 批量操作
- 开启"批量模式"开关
- 使用复选框选择多个题目
- 支持批量通过和批量拒绝
- 可以全选待审核的题目

## API 接口说明

### 文件上传
```bash
POST /api/ingest/sessions
Content-Type: multipart/form-data
Body: file (试卷文件)
```

### 获取拆分会话列表
```bash
GET /api/ingest/sessions
```

### 获取拆分项目列表
```bash
GET /api/ingest/sessions/{session_id}/items
```

### 审核通过题目
```bash
POST /api/ingest/items/{item_id}/approve
Body: {
  "stem": "题目内容",
  "type": "题目类型",
  "difficulty": 难度等级
}
```

### 拒绝题目
```bash
POST /api/ingest/items/{item_id}/reject
Body: {
  "reason": "拒绝原因"
}
```

## 实际测试数据
系统会自动生成示例拆题数据用于测试：
- 单选题：识别数学选择题
- 简答题：语文阅读理解
- 多选题：历史知识题

## 注意事项
1. 目前是MVP版本，OCR识别使用模拟数据
2. 生产环境需要集成真实的OCR服务
3. 批量操作前请仔细检查选择的题目
4. 审核通过的题目会直接添加到题库中

## 预期结果
- 文件上传成功并创建拆分会话
- 能够查看和审核拆分出的题目
- 批量操作功能正常工作
- 题目能够成功添加到题库中